<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>MDF Earthquake Response - 3 &#8212; EMA  documentation</title>
    <link rel="stylesheet" href="../../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/gallery.css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="33. Plastic Analysis" href="../plasticanalysis/121_Exam_P23.html" />
    <link rel="prev" title="Problem 1" href="225_HW11_P1.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../../index.html"><span><img src="../../_static/emtec-1.jpg"></span>
          EMA</a>
        <span class="navbar-text navbar-version pull-left"><b></b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Gallery</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html#dynamics">Dynamics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../index.html#plastic-analysis">Plastic analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules.html">ema</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">MDF Earthquake Response - 3</a><ul>
<li><a class="reference internal" href="#modal-expansion-of-earthquake-forces">Modal expansion of earthquake forces</a></li>
<li><a class="reference internal" href="#a-determine-a-n-and-d-n">a) Determine <span class="math notranslate nohighlight">\(A_n\)</span> and <span class="math notranslate nohighlight">\(D_n\)</span></a></li>
<li><a class="reference internal" href="#b-modal-response-quantities">b) Modal response quantities</a><ul>
<li><a class="reference internal" href="#floor-displacements">Floor displacements</a></li>
<li><a class="reference internal" href="#story-shears">Story shears</a></li>
<li><a class="reference internal" href="#floor-and-base-moments">Floor and base moments</a></li>
</ul>
</li>
<li><a class="reference internal" href="#c-peak-modal-response-combination">c) Peak modal response combination</a><ul>
<li><a class="reference internal" href="#id1">Floor displacements</a></li>
<li><a class="reference internal" href="#id2">Story shears</a></li>
<li><a class="reference internal" href="#floor-and-base-overturning-moments">Floor and base overturning moments</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="225_HW11_P1.html" title="Previous Chapter: Problem 1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Problem 1</span>
    </a>
  </li>
  <li>
    <a href="../plasticanalysis/121_Exam_P23.html" title="Next Chapter: 33. Plastic Analysis"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">33. Plastic Analysis &raquo;</span>
    </a>
  </li>
              
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><ul>
<li><a class="reference internal" href="#">MDF Earthquake Response - 3</a><ul>
<li><a class="reference internal" href="#modal-expansion-of-earthquake-forces">Modal expansion of earthquake forces</a></li>
<li><a class="reference internal" href="#a-determine-a-n-and-d-n">a) Determine <span class="math notranslate nohighlight">\(A_n\)</span> and <span class="math notranslate nohighlight">\(D_n\)</span></a></li>
<li><a class="reference internal" href="#b-modal-response-quantities">b) Modal response quantities</a><ul>
<li><a class="reference internal" href="#floor-displacements">Floor displacements</a></li>
<li><a class="reference internal" href="#story-shears">Story shears</a></li>
<li><a class="reference internal" href="#floor-and-base-moments">Floor and base moments</a></li>
</ul>
</li>
<li><a class="reference internal" href="#c-peak-modal-response-combination">c) Peak modal response combination</a><ul>
<li><a class="reference internal" href="#id1">Floor displacements</a></li>
<li><a class="reference internal" href="#id2">Story shears</a></li>
<li><a class="reference internal" href="#floor-and-base-overturning-moments">Floor and base overturning moments</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <li>
    <a href="225_HW11_P1.html" title="Previous Chapter: Problem 1"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Problem 1</span>
    </a>
  </li>
  <li>
    <a href="../plasticanalysis/121_Exam_P23.html" title="Next Chapter: 33. Plastic Analysis"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">33. Plastic Analysis &raquo;</span>
    </a>
  </li>
<div id="sourcelink">
  <a href="../../_sources/auto_examples/dynamics/225_HW11_P3-2.rst.txt"
     rel="nofollow">Source</a>
</div>
<form action="../../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
        </div>
      </div>
    <div class="col-md-9 content">
      
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p>Click <a class="reference internal" href="#sphx-glr-download-auto-examples-dynamics-225-hw11-p3-2-py"><span class="std std-ref">here</span></a> to download the full example code</p>
</div>
<div class="sphx-glr-example-title section" id="mdf-earthquake-response-3">
<span id="sphx-glr-auto-examples-dynamics-225-hw11-p3-2-py"></span><h1>MDF Earthquake Response - 3<a class="headerlink" href="#mdf-earthquake-response-3" title="Permalink to this headline">¶</a></h1>
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod
tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim
veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea
commodo consequat. Duis aute irure dolor in reprehenderit in voluptate
velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint
occaecat cupidatat non proident, sunt in culpa qui officia deserunt
mollit anim id est laborum.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">ema</span> <span class="k">as</span> <span class="nn">em</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="c1"># %config InlineBackend.figure_format = &#39;svg&#39; # used to make plots look nicer</span>
<span class="kn">from</span> <span class="nn">ema_examples.dynamics</span> <span class="kn">import</span> <span class="n">P09_07</span>
<span class="kn">from</span> <span class="nn">ema.utilities.ipyutils</span> <span class="kn">import</span> <span class="n">disp_sbs</span>

<span class="n">ft</span> <span class="o">=</span> <span class="mi">12</span>
<span class="n">h</span> <span class="o">=</span> <span class="mi">12</span><span class="o">*</span><span class="n">ft</span>
<span class="n">m</span> <span class="o">=</span> <span class="mi">80</span><span class="o">/</span><span class="mf">386.4</span>
<span class="n">E</span> <span class="o">=</span> <span class="mi">29000</span>
<span class="n">I</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="n">EI</span> <span class="o">=</span> <span class="n">E</span><span class="o">*</span><span class="n">I</span>
<span class="n">RHA</span> <span class="o">=</span> <span class="kc">False</span>

<span class="n">N</span> <span class="o">=</span> <span class="n">I</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">mdl</span> <span class="o">=</span> <span class="n">P09_07</span><span class="p">(</span><span class="n">h</span> <span class="o">=</span> <span class="n">h</span><span class="p">,</span> <span class="n">m</span> <span class="o">=</span> <span class="n">m</span><span class="p">,</span> <span class="n">EI</span> <span class="o">=</span> <span class="n">EI</span><span class="p">)</span>
<span class="c1"># fig, ax = plt.subplots()</span>
<span class="c1"># em.plot_structure(mdl, ax)</span>

<span class="n">m</span><span class="p">,</span> <span class="n">k</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="n">Mass_matrix</span><span class="p">(</span><span class="n">mdl</span><span class="p">),</span> <span class="n">em</span><span class="o">.</span><span class="n">K_matrix</span><span class="p">(</span><span class="n">mdl</span><span class="p">)</span>
<span class="n">k</span><span class="p">,</span> <span class="n">m</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="n">analysis</span><span class="o">.</span><span class="n">StaticCondensation</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span>
<span class="n">disp_sbs</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">df</span><span class="p">,</span> <span class="n">k</span><span class="o">.</span><span class="n">df</span><span class="p">)</span>

<span class="n">freq2</span><span class="p">,</span> <span class="n">Phi</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="n">analysis</span><span class="o">.</span><span class="n">ModalAnalysis</span><span class="p">(</span><span class="n">mdl</span><span class="p">,</span> <span class="n">norm</span><span class="o">=</span><span class="s1">&#39;last&#39;</span><span class="p">)</span>
<span class="n">Phi</span>

<span class="n">omega</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">real</span><span class="p">(</span><span class="n">freq</span><span class="p">))</span> <span class="k">for</span> <span class="n">freq</span> <span class="ow">in</span> <span class="n">freq2</span><span class="p">])</span>
<span class="n">omega</span>

<span class="n">M</span> <span class="o">=</span> <span class="n">Phi</span><span class="o">.</span><span class="n">T</span><span class="nd">@m@Phi</span>
<span class="n">K</span> <span class="o">=</span> <span class="n">Phi</span><span class="o">.</span><span class="n">T</span><span class="nd">@k@Phi</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>{&#39;text/html&#39;: &#39;&lt;table style = &quot;display:inline&quot; border=&quot;1&quot; class=&quot;dataframe&quot;&gt;\n  &lt;thead&gt;\n    &lt;tr style=&quot;text-align: right;&quot;&gt;\n      &lt;th&gt;&lt;/th&gt;\n      &lt;th&gt;$u_{{1}}$&lt;/th&gt;\n      &lt;th&gt;$u_{{2}}$&lt;/th&gt;\n      &lt;th&gt;$u_{{3}}$&lt;/th&gt;\n    &lt;/tr&gt;\n  &lt;/thead&gt;\n  &lt;tbody&gt;\n    &lt;tr&gt;\n      &lt;th&gt;$u_{{1}}$&lt;/th&gt;\n      &lt;td&gt;0.20704&lt;/td&gt;\n      &lt;td&gt;0.00000&lt;/td&gt;\n      &lt;td&gt;0.00000&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n      &lt;th&gt;$u_{{2}}$&lt;/th&gt;\n      &lt;td&gt;0.00000&lt;/td&gt;\n      &lt;td&gt;0.20704&lt;/td&gt;\n      &lt;td&gt;0.00000&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n      &lt;th&gt;$u_{{3}}$&lt;/th&gt;\n      &lt;td&gt;0.00000&lt;/td&gt;\n      &lt;td&gt;0.00000&lt;/td&gt;\n      &lt;td&gt;0.10352&lt;/td&gt;\n    &lt;/tr&gt;\n  &lt;/tbody&gt;\n&lt;/table style = &quot;display:inline&quot;&gt;&lt;table style = &quot;display:inline&quot; border=&quot;1&quot; class=&quot;dataframe&quot;&gt;\n  &lt;thead&gt;\n    &lt;tr style=&quot;text-align: right;&quot;&gt;\n      &lt;th&gt;&lt;/th&gt;\n      &lt;th&gt;$1$&lt;/th&gt;\n      &lt;th&gt;$2$&lt;/th&gt;\n      &lt;th&gt;$3$&lt;/th&gt;\n    &lt;/tr&gt;\n  &lt;/thead&gt;\n  &lt;tbody&gt;\n    &lt;tr&gt;\n      &lt;th&gt;$P_{1}$&lt;/th&gt;\n      &lt;td&gt;466.17798&lt;/td&gt;\n      &lt;td&gt;-233.08899&lt;/td&gt;\n      &lt;td&gt;0.00000&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n      &lt;th&gt;$P_{2}$&lt;/th&gt;\n      &lt;td&gt;-233.08899&lt;/td&gt;\n      &lt;td&gt;466.17798&lt;/td&gt;\n      &lt;td&gt;-233.08899&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n      &lt;th&gt;$P_{3}$&lt;/th&gt;\n      &lt;td&gt;0.00000&lt;/td&gt;\n      &lt;td&gt;-233.08899&lt;/td&gt;\n      &lt;td&gt;233.08899&lt;/td&gt;\n    &lt;/tr&gt;\n  &lt;/tbody&gt;\n&lt;/table style = &quot;display:inline&quot;&gt;&#39;}
</pre></div>
</div>
<div class="section" id="modal-expansion-of-earthquake-forces">
<h2>Modal expansion of earthquake forces<a class="headerlink" href="#modal-expansion-of-earthquake-forces" title="Permalink to this headline">¶</a></h2>
<p>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi
ut aliquip ex ea commodo consequat. Duis aute irure dolor in
reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla
pariatur.</p>
<div class="math notranslate nohighlight">
\[\mathrm{p}_{\mathrm{eff}}(t)=-\mathrm{m} \iota \ddot{u}_{g}(t)\]</div>
<div class="math notranslate nohighlight">
\[\mathbf{m} \iota=\sum_{n=1}^{N} \mathbf{s}_{n}=\sum_{n=1}^{N} \Gamma_{n} \mathbf{m} \phi_{n}\]</div>
<p>Excepteur sint occaecat cupidatat non proident, sunt in culpa qui
officia deserunt mollit anim id est laborum.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">I</span> <span class="o">=</span> <span class="n">N</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">iota</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">I</span><span class="p">)</span>
<span class="n">L</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="nb">sum</span><span class="p">(</span><span class="n">Phi</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="n">n</span><span class="p">,</span><span class="n">i</span><span class="p">]</span><span class="o">*</span><span class="nb">sum</span><span class="p">(</span><span class="n">m</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">]</span><span class="o">*</span><span class="n">iota</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">I</span><span class="p">))</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">I</span><span class="p">))</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">)])</span>
<span class="n">L</span> <span class="o">=</span> <span class="n">Phi</span><span class="o">.</span><span class="n">T</span><span class="nd">@m@iota</span>
<span class="n">L</span>

<span class="n">gamma</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">L</span><span class="p">[</span><span class="n">n</span><span class="p">]</span><span class="o">/</span><span class="n">M</span><span class="p">[</span><span class="n">n</span><span class="p">,</span><span class="n">n</span><span class="p">]</span>  <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">)])</span>
<span class="n">gamma</span>

<span class="n">s</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">gamma</span><span class="p">[</span><span class="n">n</span><span class="p">]</span><span class="o">*</span><span class="p">(</span><span class="n">m</span><span class="nd">@Phi</span><span class="o">.</span><span class="n">T</span><span class="p">[</span><span class="n">n</span><span class="p">])</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">)])</span><span class="o">.</span><span class="n">T</span>
<span class="n">s</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>array([[ 1.28780221e-01,  6.90131125e-02,  9.24600388e-03],
       [ 2.23053886e-01, -1.57374274e-17, -1.60145485e-02],
       [ 1.28780221e-01, -3.45065562e-02,  9.24600388e-03]])
</pre></div>
</div>
</div>
<div class="section" id="a-determine-a-n-and-d-n">
<h2>a) Determine <span class="math notranslate nohighlight">\(A_n\)</span> and <span class="math notranslate nohighlight">\(D_n\)</span><a class="headerlink" href="#a-determine-a-n-and-d-n" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Values read from response spectrum:</span>
<span class="n">D</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.877</span><span class="p">,</span> <span class="mf">0.10</span><span class="p">,</span> <span class="mf">0.04</span><span class="p">])</span> <span class="c1"># inches</span>
<span class="n">D</span>

<span class="c1"># if RHA:</span>
<span class="n">D</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">u</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">w</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">omega</span><span class="p">):</span>
    <span class="n">zeta</span> <span class="o">=</span> <span class="mf">0.05</span>
    <span class="n">t</span><span class="p">,</span> <span class="n">d</span> <span class="o">=</span> <span class="n">em</span><span class="o">.</span><span class="n">analysis</span><span class="o">.</span><span class="n">ElcentroRHA</span><span class="p">(</span><span class="n">zeta</span><span class="p">,</span> <span class="n">w</span><span class="p">)</span>
    <span class="n">D</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">d</span><span class="p">))</span>
    <span class="n">u</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">t</span><span class="p">,</span><span class="n">d</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>[0.923352660303864, 0.09304519274915218, 0.03763691127115581]
</pre></div>
</div>
<p>Plot modes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">fig2</span><span class="p">,</span> <span class="n">ax2</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">em</span><span class="o">.</span><span class="n">plot_structure</span><span class="p">(</span><span class="n">mdl</span><span class="p">,</span> <span class="n">ax2</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="mi">10</span><span class="o">*</span><span class="n">u</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span><span class="mi">200</span><span class="o">+</span><span class="mi">300</span><span class="o">*</span><span class="n">u</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

<span class="n">A</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">D</span><span class="p">[</span><span class="n">n</span><span class="p">]</span><span class="o">*</span><span class="n">omega</span><span class="p">[</span><span class="n">n</span><span class="p">]</span><span class="o">**</span><span class="mi">2</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">)])</span>
<span class="n">A</span>
</pre></div>
</div>
<img alt="../../_images/sphx_glr_225_HW11_P3-2_001.png" class="sphx-glr-single-img" src="../../_images/sphx_glr_225_HW11_P3-2_001.png" />
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>C:\Users\claud\OneDrive\400_box\Python\myPackages\ema\examples\dynamics\225_HW11_P3-2.py:107: UserWarning: Matplotlib is currently using agg, which is a non-GUI backend, so cannot show the figure.


array([278.54088513, 209.50424621, 158.13587895])
</pre></div>
</div>
</div>
<div class="section" id="b-modal-response-quantities">
<h2>b) Modal response quantities<a class="headerlink" href="#b-modal-response-quantities" title="Permalink to this headline">¶</a></h2>
<div class="section" id="floor-displacements">
<h3>Floor displacements<a class="headerlink" href="#floor-displacements" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Un</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="n">gamma</span><span class="p">[</span><span class="n">n</span><span class="p">]</span><span class="o">*</span><span class="n">Phi</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">n</span><span class="p">]</span><span class="o">*</span><span class="n">D</span><span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">)]</span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">I</span><span class="p">)])</span>
<span class="n">Un</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>array([[ 5.74333174e-01,  3.10150642e-02,  1.68079666e-03],
       [ 9.94774237e-01, -7.07253019e-18, -2.91122522e-03],
       [ 1.14866635e+00, -3.10150642e-02,  3.36159333e-03]])
</pre></div>
</div>
</div>
<div class="section" id="story-shears">
<h3>Story shears<a class="headerlink" href="#story-shears" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Vin</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="nb">sum</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">j</span><span class="p">,</span><span class="n">n</span><span class="p">]</span><span class="o">*</span><span class="n">A</span><span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">I</span><span class="p">))</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">)]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">I</span><span class="p">)])</span>
<span class="n">Vin</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>array([[133.87074037,   7.22927006,   0.3917752 ],
       [ 98.0001836 ,  -7.22927006,  -1.07034975],
       [ 35.87055677,  -7.22927006,   1.46212495]])
</pre></div>
</div>
</div>
<div class="section" id="floor-and-base-moments">
<h3>Floor and base moments<a class="headerlink" href="#floor-and-base-moments" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">M_base</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="nb">sum</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="n">n</span><span class="p">]</span><span class="o">*</span><span class="n">h</span><span class="o">*</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="n">A</span><span class="p">[</span><span class="n">n</span><span class="p">]</span>  <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">I</span><span class="p">))</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">)])</span>
<span class="n">M_base</span> <span class="c1"># kip-inch</span>

<span class="n">H</span> <span class="o">=</span> <span class="p">[</span><span class="n">h</span><span class="o">*</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">I</span><span class="p">)]</span>
<span class="n">H</span>

<span class="n">M_floor</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="nb">sum</span><span class="p">((</span><span class="n">H</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="o">-</span><span class="n">h</span><span class="o">*</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span><span class="o">*</span><span class="n">s</span><span class="p">[</span><span class="n">j</span><span class="p">,</span><span class="n">n</span><span class="p">]</span><span class="o">*</span><span class="n">A</span><span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">N</span><span class="p">))</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">N</span><span class="p">)]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">I</span><span class="p">)])</span>
<span class="n">M_floor</span> <span class="c1"># kip-inch</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>array([[19277.38661365, -2082.02977602,    56.41562875],
       [ 5165.36017531, -1041.01488801,   210.54599284],
       [    0.        ,     0.        ,     0.        ]])
</pre></div>
</div>
</div>
</div>
<div class="section" id="c-peak-modal-response-combination">
<h2>c) Peak modal response combination<a class="headerlink" href="#c-peak-modal-response-combination" title="Permalink to this headline">¶</a></h2>
<p>For well-seperated modal frequencies, the SRSS method is employed.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">ro</span><span class="p">(</span><span class="n">rno</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">rn</span><span class="o">**</span><span class="mi">2</span> <span class="k">for</span> <span class="n">rn</span> <span class="ow">in</span> <span class="n">rno</span><span class="p">))</span>
</pre></div>
</div>
<div class="section" id="id1">
<h3>Floor displacements<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ro</span><span class="p">(</span><span class="n">Un</span><span class="o">.</span><span class="n">T</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>array([0.57517246, 0.9947785 , 1.14908991])
</pre></div>
</div>
</div>
<div class="section" id="id2">
<h3>Story shears<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ro</span><span class="p">(</span><span class="n">Vin</span><span class="o">.</span><span class="n">T</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>array([134.06636775,  98.27229508,  36.62099122])
</pre></div>
</div>
</div>
<div class="section" id="floor-and-base-overturning-moments">
<h3>Floor and base overturning moments<a class="headerlink" href="#floor-and-base-overturning-moments" title="Permalink to this headline">¶</a></h3>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ro</span><span class="p">(</span><span class="n">M_base</span><span class="p">)</span>

<span class="n">ro</span><span class="p">(</span><span class="n">M_floor</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-script-out">Out:</p>
<div class="sphx-glr-script-out highlight-none notranslate"><div class="highlight"><pre><span></span>array([19957.41918167,  2327.78005518,   217.97325126])
</pre></div>
</div>
<p class="sphx-glr-timing"><strong>Total running time of the script:</strong> ( 0 minutes  49.774 seconds)</p>
<div class="sphx-glr-footer class sphx-glr-footer-example docutils container" id="sphx-glr-download-auto-examples-dynamics-225-hw11-p3-2-py">
<div class="sphx-glr-download docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/0f716a9656883b3c026eae4c7e538954/225_HW11_P3-2.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">225_HW11_P3-2.py</span></code></a></p>
</div>
<div class="sphx-glr-download docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/3320949c12ed729333953176e55d3784/225_HW11_P3-2.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">225_HW11_P3-2.ipynb</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="../../_sources/auto_examples/dynamics/225_HW11_P3-2.rst.txt"
     rel="nofollow">Source</a>
</div>
      
    </p>
    <p>
        &copy; Copyright 2020, Claudio Perez.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.2.2.<br/>
    </p>
  </div>
</footer>
  </body>
</html>